let express,readdirSync,cors,mongoose;_ba4‍.w("express",[["default",["express"],function(v){express=v}]]);_ba4‍.w("fs",[["readdirSync",["readdirSync"],function(v){readdirSync=v}]]);_ba4‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_ba4‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);



const morgan = require("morgan");
require("dotenv").config();


const app = express();

//db connection
mongoose
.connect(process.env.DATABASE, {})
.then(()=> console.log("DB connected"))
.catch((err)=> console.log(`db connect error: ${err}`));

//middlewares
app.use(cors());
app.use(morgan("dev"));
app.use(express.json()); //converts the request

//route midleware
readdirSync("./routes").map((r)=>
app.use("/api", require(`./routes/${r}`))
);


//running the server
const port = process.env.PORT || 8000
app.listen(port, ()=> console.log(`server is running on ${port}`));